<div itemprop="articleBody" data-page-indentifier="/courses/nettoyez-et-decrivez-votre-jeu-de-donnees/analysez-1-variable-quantitative-et-1-qualitative-par-anova" class="js-isRestrictablePage js-course-container js-smilize js-userCanWatchVideo">
<div class="userContent js-userContent">
<p id="r-4775696" data-claire-element-id="8726121">
Dans les 2 chapitres précédents, nous avons étudié les corrélations entre 2 variables quantitatives. Maintenant, passons à l'étude de deux variables dont l'une est qualitative, l'autre quantitative.</p>
<h3 id="r-4775207" data-claire-element-id="8726134">
Quelles questions se poser ?</h3>
<p id="r-4775187" data-claire-element-id="8726122">
En fonction des couples de variables que nous utiliserons, la méthode d'analyse sera la même, mais nous pourrons répondre à différentes questions intéressantes :</p>
<ul id="r-4775707" data-claire-element-id="8726133">
<li id="r-4775698" data-claire-element-id="8726124">
<p id="r-4775697" data-claire-element-id="8726123">
Les dépenses que vous faites le weekend sont-elles plus grosses qu'en semaine ? (variables<em>
montant</em>
et<em>
weekend</em>
)</p>
</li>
<li id="r-4775700" data-claire-element-id="8726126">
<p id="r-4775699" data-claire-element-id="8726125">
Les dépenses que vous faites en début de mois sont-elles plus grosses qu'en fin de mois ? (<em>
montant</em>
et<em>
quart_mois</em>
)</p>
</li>
<li id="r-4775702" data-claire-element-id="8726128">
<p id="r-4775701" data-claire-element-id="8726127">
Le montant d'une opération est-il différent d'une catégorie de dépense à l'autre ? (<em>
montant</em>
et<em>
categ</em>
)</p>
</li>
<li id="r-4775704" data-claire-element-id="8726130">
<p id="r-4775703" data-claire-element-id="8726129">
Vos paiements en carte bancaire sont-ils toujours petits et vos virements importants ? (<em>
type</em>
et<em>
montant</em>
)</p>
</li>
<li id="r-4775706" data-claire-element-id="8726132">
<p id="r-4775705" data-claire-element-id="8726131">
Le solde de votre compte est-il plus petit en fin de mois qu'en début de mois ? (<em>
solde_avt_operation</em>
et<em>
quart_mois</em>
)</p>
</li>
</ul>
<p id="r-4775196" data-claire-element-id="8724241">
Voici le code informatique qui permet de représenter une variable quantitative et une variable qualitative. Adaptez ce code pour répondre aux question ci-dessus !</p>
<table id="r-4775201" data-claire-element-id="8724246">
<tbody id="r-4775200" data-claire-element-id="8724245">
<tr id="r-4775199" data-claire-element-id="8724244">
<td id="r-4775198" data-claire-element-id="8724243">
<p id="r-4775197" data-claire-element-id="8724242">
CODE</p>
</td>
</tr>
</tbody>
</table>
<table id="r-4775206" data-claire-element-id="8724251">
<tbody id="r-4775205" data-claire-element-id="8724250">
<tr id="r-4775204" data-claire-element-id="8724249">
<td id="r-4775203" data-claire-element-id="8724248">
<p id="r-4775202" data-claire-element-id="8724247">
GRAPHIQUE</p>
</td>
</tr>
</tbody>
</table>
<h3 id="r-4775231" data-claire-element-id="8789142">
Modélisons</h3>
<p id="r-4775208" data-claire-element-id="8724253">
Revenons sur la démarche que nous avons eue au chapitre précédent. Pour voir s'il existait une corrélation (linéaire) entre 2 variables, nous avons supposé que cette corrélation existait, puis nous avons appliqué un modèle sur cette supposition. Nous avons ensuite estimé les paramètres<math>
$\(a\)$</math>
et<math>
$\(b\)$</math>
. Enfin, nous avons vérifié la supposition de départ en évaluant la qualité du modèle. Si ce modèle est de bonne qualité, alors c'est qu'il y a une forte corrélation entre X et Y. En bonus, nous avons profité de la formule de la régression linéaire<math>
$\(Y = aX + b + \epsilon\)$</math>
pour interpréter a comme la somme d'argent consommée en 1 jour, et b comme la somme d'argent de vos stocks et produits non consommables.</p>
<p id="r-4775209" data-claire-element-id="8724254">
Ici, nous utiliserons la même démarche.</p>
<p id="r-4775210" data-claire-element-id="8789141">
On pourrait reprendre la formule de la régression linéaire ci-dessus, sauf qu'elle implique de multiplier<math>
$\(X\)$</math>
par<math>
$\(a\)$</math>
. Or cette fois-ci, X est qualitative, comme notre variable<em>
categ</em>
. Multiplier une variable qualitative par un nombre n'a aucun sens (ex: "TRANSPORT" * 3 n'a aucun sens !).</p>
<p id="r-4775211" data-claire-element-id="8724256">
Nous allons faire autrement. Nous allons dont faire la supposition que vos opérations bancaires ont un montant de référence en commun appelé<math>
$\(\mu\)$</math>
.Ensuite, on considère que le montant de l'opération s'ajuste en fonction de la catégorie<math>
$\(i\)$</math>
de dépense (loyer, transport, courses, etc.). Si une catégorie a des montants qui sont en général inférieurs à<math>
$\(\mu\)$</math>
, alors cet ajustement<math>
$\(\alpha_i\)$</math>
sera négatif. Dans le cas contraire, il sera positif. On ajoute la contrainte que la somme de tous les<math>
$\(\alpha_i\)$</math>
soit égale à 0. Par exemple, un loyer est en général assez onéreux : son<math>
$\(\alpha_{loyer}\)$</math>
sera donc positif.</p>
<div id="r-4775213" data-claire-element-id="8724258" data-claire-semantic="question">
<p id="r-4775212" data-claire-element-id="8724257">
Comme au chapitre précédent, tu commettra toujours une erreur de prédiction, car au sein d'une même catégorie, les montants ne sont pas tous les mêmes !</p>
</div>
<p id="r-4775214" data-claire-element-id="8724259">
C'est bien vrai. Comme pour le modèle de la régression linéaire, on aura ici aussi un terme d'erreur<math>
$\(\epsilon\)$</math>
:</p>
<p id="r-4775215" data-claire-element-id="8724260">
<math>
$\[Y = \alpha_{i} + \mu + \epsilon\]$</math>
</p>
<p id="r-4775216" data-claire-element-id="8724261">
Comme dans le chapitre précédent, on peut laisser l'ordinateur estimer tous les<math>
$\(\alpha_i\)$</math>
et<math>
$\( \mu\)$</math>
, sauf qu'ici, les calculs mathématiques qui nous disent quels sont les<math>
$\(\alpha_i \)$</math>
et<math>
$\(\mu\)$</math>
qui minimisent l'erreur<math>
$\(\epsilon \)$</math>
donnent des résultats très intuitifs :</p>
<ul id="r-4775221" data-claire-element-id="8724266">
<li id="r-4775218" data-claire-element-id="8724263">
<p id="r-4775217" data-claire-element-id="8724262">
Le montant de référence<math>
$\( \mu\)$</math>
est estimé par la moyenne de tous les montants. On appelle cette estimation<math>
$\(\hat{\mu}\)$</math>
</p>
</li>
<li id="r-4775220" data-claire-element-id="8724265">
<p id="r-4775219" data-claire-element-id="8724264">
Pour une catégorie<math>
$\(i\)$</math>
,<math>
$\( \alpha_i\)$</math>
est estimé en calculant l'écart entre<math>
$\(\hat{\mu}\)$</math>
et la moyenne \overline{y_i} des montants de la catégorie<math>
$\(i\)$</math>
, c'est-à-dire \hat{\alpha_i} = \overline{y_i} - \hat{\mu}</p>
</li>
</ul>
<aside id="r-4775336" data-claire-element-id="8730262" data-claire-semantic="information">
<p id="r-4775222" data-claire-element-id="8730261">
Rappelez vous le chapitre sur les<a href="/courses/nettoyez-et-decrivez-votre-jeu-de-donnees/valeurs-manquantes-aberrantes-et-doublons-sachez-reagir#r-4698830">
valeurs manquantes</a>
. Nous avions un individu : Luc. Il est français et sa taille est inconnue. Plutôt que de lui attribuer comme taille la moyenne de tout l'échantillon<math>
$\(\hat{\mu} = 1,52m\)$</math>
, on avait décidé de lui attribuer la moyenne des français. Les français étaient ici 5cm plus grands que la moyenne, soit<math>
$\(\hat{\alpha}_{francais} = 5cm\)$</math>
. Ainsi, la taille de Luc a été estimée à<math>
$\(\hat{y}=\hat{\alpha}_{francais} + \hat{\mu} = 1.57m\)$</math>
.</p>
</aside>
<aside id="r-4775392" data-claire-element-id="8724732" data-claire-semantic="warning">
<p id="r-4775391" data-claire-element-id="8724731">
Ce modèle est très utilisé en statistiques inférentielle et est appelé a<strong>
nalyse de la variance</strong>
, en anglais ANalysis Of VAriance (<strong>
ANOVA</strong>
).</p>
</aside>
<h3 id="r-4775354" data-claire-element-id="8724742">
Evaluation du modèle : les variables sont-elles corrélées ?</h3>
<p id="r-4775342" data-claire-element-id="8724639">
Notre modèle est-il de qualité ? Prévoit-on correctement les montants des opérations uniquement à partir de leur catégorie ?</p>
<p id="r-4775343" data-claire-element-id="8724640">
Comme au chapitre précédent, on espère que notre modèle parvienne à expliquer un gros pourcentage des variations des données. Si c'est le cas, cela signifie que les variables<em>
categ</em>
et<em>
montant</em>
sont fortement corrélées.</p>
<p id="r-4775344" data-claire-element-id="8724734">
Pour évaluer cela, la formule utilisée est exactement la même que celle du chapitre précédent :<math>
$\(SCT = SCE + SCR\)$</math>
. Mais ici, comme la variable X est qualitative, on peut donner à SCT, SCE et SCR des expressions équivalentes à celles de chapitre précédent. Elles sont données dans la section<em>
Aller plus loin</em>
. De plus, cela permet une meilleure interprétation de ces 3 sigles, qui peuvent être renommés respectivement en<strong>
variation totale</strong>
,<strong>
variation interclasse</strong>
et<strong>
variation intraclasse</strong>
(les classes sont les modalités de X).</p>
<p id="r-4775366" data-claire-element-id="8724711">
De la même manière qu'on avait au chapitre précédent<math>
$\(R^2 = \frac{SCE}{SCT}\)$</math>
, l'équivalent ici s'appelle le<strong>
rapport de corrélation</strong>
, compris entre 0 et 1, donné par :</p>
<p id="r-4775393" data-claire-element-id="8724735">
<math>
$\[\eta^2_{Y/X} = \frac{V_{interclasses}}{V_{totale}}\]$</math>
</p>
<p id="r-4775367" data-claire-element-id="8724693">
</p>
<p id="r-4775381" data-claire-element-id="8724736">
Si<math>
$\(\eta^2_{Y/X} = 0\)$</math>
, cela signifie que les moyennes par classes sont toutes égales. Il n’y a donc pas a priori de relation entre les variables Y et X. Au contraire, si<math>
$\(\eta^2_{Y/X} = 1\)$</math>
, cela signifie que les moyennes par classes sont très différentes, chacune des classes étant constituée de valeurs identiques : il existe donc a priori une<br>
relation entre les variables Y et X.</p>
<table id="r-4775386" data-claire-element-id="8724741">
<tbody id="r-4775385" data-claire-element-id="8724740">
<tr id="r-4775384" data-claire-element-id="8724739">
<td id="r-4775383" data-claire-element-id="8724738">
<p id="r-4775382" data-claire-element-id="8724737">
CODE (+ graphique avec les variations interclasses?)</p>
</td>
</tr>
</tbody>
</table>
<h3 id="r-4775369" data-claire-element-id="8724696">
Aller plus loin : les expressions de SCT, SCE et SCR</h3>
<p id="r-4775368" data-claire-element-id="8724695">
Elles introduisent les effectifs<math>
$\(n_i\)$</math>
de chacune des classes<math>
$\(i\)$</math>
, qui sont au nombre de<math>
$\(k\)$</math>
. Ainsi,</p>
<p id="r-4775345" data-claire-element-id="8724642">
<math>
$\[SCT = \sum_{j=1}^{n}(y_j-\overline{y})^2\ \text{ devient }\ \sum_{i=1}^k\sum_{j=1}^{n_i}(y_{ij}-\overline{y})^2\]$</math>
</p>
<aside id="r-4775347" data-claire-element-id="8724644" data-claire-semantic="information">
<p id="r-4775346" data-claire-element-id="8724643">
<strong>
SCT</strong>
est ici appelé<strong>
variation totale</strong>
(les anglophones utilisent plutôt<em>
Total Sum of Square</em>
s).</p>
</aside>
<p id="r-4775348" data-claire-element-id="8724645">
<math>
$\[SCE = \sum_{j=1}^n(\hat{y_j}-\overline{y})^2\ \text{ devient }\ \sum_{i=1}^kn_i(\overline{y_i}-\overline{y})^2\]$</math>
</p>
<aside id="r-4775350" data-claire-element-id="8724647" data-claire-semantic="information">
<p id="r-4775349" data-claire-element-id="8724646">
<strong>
SCE</strong>
est ici appelé<strong>
variation interclasse</strong>
(<em>
Sum of Squares of the Model</em>
)</p>
</aside>
<p id="r-4775356" data-claire-element-id="8724662">
<math>
$\[SCR = \sum_{j=1}^n(y_j-\overline{y_j})^2\ \text{ devient }\ \sum_{i=1}^k\sum_{j=1}^{n_i}(y_{ij}-\overline{y_i})^2 = \sum_{i=1}^kn_is_i^2\]$</math>
</p>
<aside id="r-4775361" data-claire-element-id="8724671" data-claire-semantic="information">
<p id="r-4775357" data-claire-element-id="8724663">
<strong>
SCR</strong>
est ici appelé<strong>
variation intraclasse</strong>
(<em>
Sum of Squares of the Error</em>
) car<math>
$\(s_i^2\)$</math>
est la variance au sein de la classe<math>
$\(i\)$</math>
.</p>
</aside>
<p id="r-4775362" data-claire-element-id="8724672">
</p>
</div>
<div class="js-courseSelementActions sideActions">
<ul class="sideActions__container">
<li>
<a class="sideActions__item js-courseElementActions-copyUrl js-tooltip" href="#" data-tooltip="Copier le lien" data-tooltip-done="Lien copié !">
#</a>
</li>
</ul>
</div>
</div>
