<div itemprop="articleBody" data-page-indentifier="/courses/nettoyez-et-decrivez-votre-jeu-de-donnees/valeurs-manquantes-aberrantes-et-doublons-sachez-reagir" class="js-isRestrictablePage js-course-container js-smilize js-userCanWatchVideo">
<div class="userContent js-userContent">
<p id="r-4698446" >
Nous l'avons vu dans le chapitre précédent, un échantillon peut contenir des valeurs manquantes, des outliers et des doublons. Alors que faire ?</p>
<aside id="r-4762155" data-claire-semantic="warning">
<p id="r-4762154" >
Certaines des méthodes suivantes suppriment de l'information dans votre échantillon. Faites attention à toujours<em>
conserver une copie de votre échantillon</em>
. Si vous souhaitez supprimer de l'information, alors créez une copie de l'échantillon, puis supprimez ce que vous voulez : le nouvel échantillon que vous obtenez sera appelé<strong>
sous-échantillon</strong>
.</p>
</aside>
<p id="r-4762157" >
</p>
<h3 id="r-4727259" >
Les valeurs manquantes</h3>
<p id="r-4698447" >
Lorsque l'échantillon contient des valeurs manquantes, on ne peut malheureusement pas faire de miracle pour les retrouver ! Cependant, plusieurs attitudes sont possibles.</p>
<h4 id="r-4698660" >
Ne rien faire et travailler avec un gruyère</h4>
<p id="r-4698541" >
Pour une variable donnée (par exemple d<em>
ate de naissance</em>
dans l'exemple du chapitre précédent), si la proportion de valeurs manquantes est faibles, alors on peut les oublier et ne rien faire : on laisse l'échantillon intact. On travaillera alors avec un jeu de données qui contiendra des "trous", comme dans un gruyère. :honte: Selon le traitement statistique que vous appliquerez, cette solution sera ou non acceptable.</p>
<h4 id="r-4698661" >
Oublier une variable</h4>
<p id="r-4698542" >
Cependant, si pour cette même variable, la proportion de valeurs manquantes est beaucoup trop importante, mieux vaut l'oublier, à condition que la variable ne soit pas trop importante pour l'analyse. Cela équivaut à ne pas considérer une colonne dans le tableau du chapitre précédent.</p>
<h4 id="r-4727258" >
Oublier des individus</h4>
<p id="r-4698543" >
Si la variable qui contient des données manquantes est cruciale dans l'analyse, alors mieux vaut créer un sous-échantillon et y supprimer les individus pour lesquels cette variable est manquante. Par exemple, si vous analysez vos relevés de comptes bancaires en vous intéressant aux sommes d'argent que vous gagnez/dépensez, la variable "montant de l'opération" sera très importante. S'il arrive que le montant de l'opération soit inconnu pour certaines lignes de votre relevé, alors mieux vaut créer un sous-échantillon et y supprimer la totalité de ces lignes.</p>
<p id="r-4727257" >
Cette dernière méthode contient cependant des risques. En effet, vous pouvez vous retrouver avec un nombre d'individus (un nombre de lignes) trop petit pour que votre analyse ait encore du sens. De plus, il se peut que votre échantillon ne soit plus représentatif de la population globale. Pour savoir pourquoi, rendez-vous à la section<em>
Aller plus loin</em>
au bas de ce chapitre.</p>
<h4 id="r-4698668" >
Essayer de deviner quand même !</h4>
<p id="r-4698663" >
Une méthode un peu plus aventurière consiste à combler les trous par des valeurs à deviner. C'est un peu la méthode des aventuriers ! :zorro: Bien sûr, ces valeurs ne correspondront pas à la valeur réelle, mais certaines méthodes permettent de ne pas se tromper de beaucoup. Deviner une valeur manquante s'appelle l'<strong>
imputation</strong>
.</p>
<p id="r-4698664" >
Par exemple, On peut remplacer les valeurs manquantes de la variable<em>
taille</em>
par la taille moyenne des individus de notre échantillon. Dans notre exemple, pour corriger la taille de Hanna (que nous supposons être erronée), on la remplace par la moyenne des autres individus, soit 1,52m. C'est l'<strong>
imputation par la moyenne</strong>
.</p>
<h5 id="r-4698830" >
Deviner à partir d'autres variables</h5>
<p id="r-4698816" >
Mais on peut faire mieux ! Pour remplacer une variable donnée, on peut regarder les autres variables aux alentours. Il y a plusieurs méthodes qui utilisent ce principe.</p>
<p id="r-4698817" >
Imaginons un nouvel individu : Luc, français, dont la taille est inconnue. Plutôt que de lui attribuer la moyenne de tout l'échantillon (1,52m), on peut lui attribuer la moyenne des français : 1,57m. Ici, on a regardé la valeur de la variable<em>
pays</em>
pour déduire la valeur de la variable<em>
taille</em>
.</p>
<p id="r-4698818" >
D'autres méthodes sont également basées sur le fait de déduire une variable à partir d'autres. On peut citer les méthodes de<em>
Hot-deck</em>
, ou les méthodes basées sur des<em>
régressions linéaires</em>
. Ces dernières sont un peu plus complexes, et vous avez besoin de comprendre ce qu'est une régression linéaire. Patience, nous le verrons à la fin de ce cours ! :D</p>
<aside id="r-4698820" data-claire-semantic="warning">
<p id="r-4698819" >
Deviner (imputer) des valeurs modifie votre échantillon, car les valeurs imputées sont fausses. En particulier, vos calculs de variances ou de corrélations (nous verrons ces concepts plus tard) seront faussées. Il faut donc les utiliser avec des pincettes, comme en témoigne<a href="http://www.i3s.unice.fr/~crescenz/publications/Florence/valeurs-manquantes-ou-aberrantes.pdf">
ce document</a>
(pages 4 et 5).</p>
<p id="r-4762206" >
Dans tous les cas, il est nécessaire de toujours préciser quelle méthode vous avez utilisé dans chacun des résultats d'analyse que vous présenterez. C'est une question d'honnêteté intellectuelle. ;)</p>
</aside>
<p id="r-4698407" >
</p>
<h3 id="r-4698850" >
Les outliers</h3>
<p id="r-4698842" >
Hanna mesure 3,45m. Vous ne trouvez pas cela très grand ? Si. C'est très grand<em>
comparé</em>
aux tailles des autres êtres humains.</p>
<p id="r-4698861" >
Mais attention, un outlier n'est pas forcément une valeur fausse ! En effet, Hanna mesure peut-être réellement 3,45m. Ok, c'est difficile à concevoir, mais c'est possible.</p>
<aside id="r-4776952" data-claire-semantic="warning">
<p id="r-4776946" >
Un<strong>
outlier</strong>
peut être :</p>
<ul id="r-4776951" >
<li id="r-4776948" >
<p id="r-4776947" >
une valeur<strong>
aberrante</strong>
: c'est une valeur qui est manifestement fausse</p>
</li>
<li id="r-4776950" >
<p id="r-4776949" >
une valeur<strong>
atypique</strong>
: c'est une valeur qui "sort du lot", mais pas forcément fausse.</p>
</li>
</ul>
</aside>
<p id="r-4698966" >
Idéalement, il faudrait vérifier si les outliers sont erronées ou pas. Par exemple, un thermomètre qui mesure les températures en France peut indiquer 40°c, mais il peut s'agir soit d'une défaillance du capteur de température, soit d'une valeur réelle.</p>
<p id="r-4724150" >
Alors que faire avec les outliers ? Si nous sommes sûrs que la valeur est erronée (erreur de saisie ou défaut d’un capteur par exemple), alors il faut la supprimer s’il n’est pas possible de connaître la vraie valeur. Dans les autres cas, nous avons le choix entre :</p>
<ul id="r-4724155" >
<li id="r-4724152" >
<p id="r-4724151" >
Supprimer la valeur. On se retrouve alors avec une valeur manquante, à laquelle on peut imputer une valeur comme nous l’avons vu précédemment. L’imputation n’est pas obligatoire.</p>
</li>
<li id="r-4724154" >
<p id="r-4724156" >
Conserver la valeur.</p>
</li>
</ul>
<p id="r-4762209" >
Comment choisir entre ces deux options ? Tout dépend des traitements que vous appliquerez par la suite. Certaines méthodes sont dites « robustes », car elle ne sont pas déstabilisées par les outliers. Par exemple, nous verrons par la suite que la moyenne est très sensible aux outliers, alors que la médiane de l’est pas. Si vous souhaitez faire une moyenne, créez un sous-échantillons dans lequel vous ne considérez pas les outliers. Mais si vous calculez aussi la médiane, travaillez sur l’échantillon de départ. ;)</p>
<aside id="r-4724158" data-claire-semantic="warning">
<p id="r-4724157" >
N’hésitez pas, quand vous présentez votre analyse, à citer les outliers si ils sont intéressantes. Par exemple « les relevés de température contiennent 2 outliers à 42°c, dus à 2 jours de canicule extrême »</p>
</aside>
<p id="r-4724159" >
</p>
<h3 id="r-4724177" >
Et les doublons ?</h3>
<p id="r-4724160" >
Dans notre exemple, Samuel est présent 2 fois. c’est problématique, car ce doublon (aussi appelé « donnée dupliquée ») fausse les analyses : notamment la taille moyenne de l'échantillon.</p>
<p id="r-4724161" >
Il faut éliminer les doublons. Cependant, il n’y a pas de règle précise pour les détecter : vous seuls pouvez les détecter, à partir de la structure de vos données et en sachant comment elles ont été collectées. Mais parfois, ce sera impossible. :(</p>
<p id="r-4724162" >
Un petit exemple : si votre échantillon contient une variable « identifiant », alors il est aisé de détecter des doublons : ce sont ceux qui auront le même identifiant ;) . Dans notre exemple, on peut considérer que l’adresse email est l’identifiant d’une personne. Dans notre exemple, les 2 lignes qui ont pour email<code data-claire-semantic="text">
samuel_329@example.com</code>
constituent un doublon.</p>
<aside id="r-4724164" data-claire-semantic="information">
<p id="r-4724163" >
Si vous êtes familier avec les bases de données, vous connaissez probablement la notion de<a href="/courses/initiez-vous-a-lalgebre-relationnelle-avec-le-langage-sql/comprenez-limportance-des-cles">
clé</a>
(clé primaire ou clé candidate). Deux individus avec les mêmes valeurs pour une clé<em>
sont</em>
un doublon !</p>
</aside>
<p id="r-4724165" >
Autre exemple : vous analysez des relevés de température pris dans un village. Il y a 2 stations météo dans ce village : la station 1, qui a fonctionné de nombreuses années jusqu’au 15 janvier 2019, puis qui s’est arrêtée à cause de son ancienneté. Cette panne ayant été prévue, une station 2 avait été installée (au même endroit) pour la remplacer : elle a été mise en service le 2 janvier 2019. Votre échantillon est donc constitué de relevés provenant des 2 stations. Cependant, les relevés compris entre le 2 janvier et le 15 janvier 2019 sont en double, car les 2 stations fonctionnaient en parallèle. Il vous faut donc supprimer, pour chaque date comprise dans cette période, l’un des 2 relevés.</p>
<div id="r-4724167" data-claire-semantic="question">
<p id="r-4724166" >
Oui mais de nos deux lignes contenant<code data-claire-semantic="text">
samuel_329@example.com</code>
, faut-il en supprimer une au hasard ?</p>
</div>
<p id="r-4724168" >
En fait, il faut faire un peu plus attention. Mieux vaut les<em>
regrouper</em>
en une ligne. En effet, parmi ces 2 lignes, la 1ere nous informe que Samuel est né le 20/09/2001, et la seconde ligne nous informe que Samuel habite au Bénin (information qui est manquante dans la 1ere ligne). Le problème, c’est pour la taille : la première ligne nous dit que Samuel mesure 1,67m, alors que la seconde nous affirme qu’il n’en mesure que 1,45m. Il y a contradiction. S’il n’y a pas d’autre moyen de vérification, on peut par exemple choisir de prendre la moyenne de ces 2 valeurs.</p>
<p id="r-4724170" >
</p>
<p id="r-4724171" >
</p>
<p id="r-4724172" >
</p>
<p id="r-4724173" >
</p>
<p id="r-4724174" >
</p>
<h3 id="r-4762254" >
Aller plus loin : conséquence de la suppression d'individus</h3>
<p id="r-4762251" >
Imaginez un échantillon de personnes de la même forme que celui du chapitre précédent :</p>
<table id="r-4762372" >
<thead id="r-4762325" >
<tr id="r-4762324" >
<td id="r-4762317" >
<p id="r-4762316" >
Prénom</p>
</td>
<td id="r-4762319" >
<p id="r-4762318" >
Pays</p>
</td>
<td id="r-4762321" >
<p id="r-4762320" >
Date de naissance</p>
</td>
<td id="r-4762323" >
<p id="r-4762322" >
Taille</p>
</td>
</tr>
</thead>
<tbody id="r-4762371" >
<tr id="r-4762334" >
<td id="r-4762327" >
<p id="r-4762326" >
Albert</p>
</td>
<td id="r-4762329" >
<p id="r-4762328" >
France</p>
</td>
<td id="r-4762331" >
<p id="r-4762330" >
23/09/1930</p>
</td>
<td id="r-4762333" >
<p id="r-4762332" >
1,45 m</p>
</td>
</tr>
<tr id="r-4762343" >
<td id="r-4762336" >
<p id="r-4762335" >
Sophia</p>
</td>
<td id="r-4762338" >
<p id="r-4762337" >
USA</p>
</td>
<td id="r-4762340" >
<p id="r-4762339" >
01/20/1959</p>
</td>
<td id="r-4762342" >
<p id="r-4762341" >
1,68 m</p>
</td>
</tr>
<tr id="r-4762352" >
<td id="r-4762345" >
<p id="r-4762344" >
Donald</p>
</td>
<td id="r-4762347" >
<p id="r-4762346" >
USA</p>
</td>
<td id="r-4762349" >
<p id="r-4762348" >
02/16/2002</p>
</td>
<td id="r-4762351" >
<p id="r-4762350" >
1,65 m</p>
</td>
</tr>
<tr id="r-4762361" >
<td id="r-4762354" >
<p id="r-4762353" >
Ali</p>
</td>
<td id="r-4762356" >
<p id="r-4762355" >
France</p>
</td>
<td id="r-4762358" >
<p id="r-4762357" >
16/02/2000</p>
</td>
<td id="r-4762360" >
<p id="r-4762359" >
1,57 m</p>
</td>
</tr>
<tr id="r-4762370" >
<td id="r-4762363" >
<p id="r-4762362" >
Doriane</p>
</td>
<td id="r-4762365" >
<p id="r-4762364" >
Togo</p>
</td>
<td id="r-4762367" >
<p id="r-4762366" >
17/08/1978</p>
</td>
<td id="r-4762369" >
<p id="r-4762368" >
1,58 m</p>
</td>
</tr>
</tbody>
</table>
<p id="r-4762253" >
Vous décidez de supprimer les dates de naissances pour lesquelles le format n'est pas<code data-claire-semantic="text">
jour/mois/année</code>
, ce qui créera des valeurs manquantes dans la variable d<em>
ate de naissance</em>
. Puis, vous décidez de supprimer toutes les lignes (tous les individus) qui ont une date de naissance manquante. Vous aurez probablement supprimé toutes les personnes habitant aux USA, car ceux-ci ont l'habitude d'écrire les dates<a href="https://frenchmorning.com/pourquoi-les-americains-mettent-le-mois-en-tete-de-la-date/">
différemment des francophones</a>
. Si vous réalisez ensuite une analyse sur les tailles, votre échantillon ne sera plus représentatif, car les personnes des USA ont sûrement une taille moyenne différente de celle des autres pays.</p>
<p id="r-4724175" >
</p>
<p id="r-4724176" >
</p>
<p id="r-4698843" >
</p>
<p id="r-4698849" >
</p>
<p id="r-4698448" >
</p>
</div>
<div class="js-courseSelementActions sideActions">
<ul class="sideActions__container">
<li>
<a class="sideActions__item js-courseElementActions-copyUrl js-tooltip" href="#" data-tooltip="Copier le lien" data-tooltip-done="Lien copié !">
#</a>
</li>
</ul>
</div>
</div>
