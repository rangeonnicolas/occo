<div itemprop="articleBody" data-page-indentifier="/courses/nettoyez-et-decrivez-votre-jeu-de-donnees/representez-la-distribution-empirique-dune-variable" class="js-isRestrictablePage js-course-container js-smilize js-userCanWatchVideo">
<div class="userContent js-userContent">
<p id="r-4742246" data-claire-element-id="8654101">
Comment peut-on représenter une variable ?</p>
<p id="r-4742271" data-claire-element-id="8787651">
Jusqu'à maintenant, nous avons vu comment<a href="/courses/nettoyez-et-decrivez-votre-jeu-de-donnees/decouvrez-les-statistiques-vocabulaire-et-tour-dhorizon">
afficher un échantillon</a>
(sous forme de tableau où chaque ligne représente un individu, et chaque colonne une variable). Pour représenter la variable<em>
categ</em>
par exemple, on pourrait sélectionner la colonne<em>
categ</em>
du tableau, et l'afficher telle qu'elle :</p>
<figure id="r-4789818" data-claire-element-id="8788012">
<img id="r-4789816" data-claire-element-id="8763981" src="https://user.oc-static.com/upload/2017/10/30/15094043712247_categ.png" alt="La colonne">
<figcaption>
La colonne "categ"</figcaption>
</figure>
<p id="r-4742287" data-claire-element-id="8763984">
Mais il faut avouer que c'est assez illisible ! :waw: En plus, il est fréquent d'avoir des échantillons de 1000 individus ou plus. Une colonne avec 1000 valeur dedans, c'est très moche et très difficile à interpréter. Il y a une solution bien meilleure, qui consiste à dire :</p>
<p id="r-4742321" data-claire-element-id="8654311">
<em>
Il y a 39 fois la valeur COURSES, 212 fois la valeur AUTRE, 21 fois la valeur TRANSPORT, etc.</em>
</p>
<p id="r-4742322" data-claire-element-id="8654243">
Cette formulation est appelée<strong>
distribution empirique</strong>
. C'est cette distribution que l'on se propose de représenter graphiquement ici.</p>
<h3 id="r-4742336" data-claire-element-id="8788020">
Représenter une distribution empirique</h3>
<p id="r-4742326" data-claire-element-id="8787703">
Les différentes "possibilités" que l'on peut observer pour la variable<em>
categ</em>
, ce sont les<strong>
modalités</strong>
. Les modalités de la variable<em>
categ</em>
sont :<em>
courses</em>
,<em>
transport</em>
,<em>
autre</em>
,<em>
loyer</em>
, etc. On associe à chaque modalité un<strong>
effectif</strong>
. L'effectif de la modalité<em>
courses</em>
est<math>
$\(n_{courses} = 39\)$</math>
.</p>
<p id="r-4742327" data-claire-element-id="8654253">
Le distribution empirique d'une variable, c'est l’ensemble des valeurs prises (modalités) par cette variable, et leurs effectifs associées.</p>
<h4 id="r-4742335" data-claire-element-id="8787723">
Cas des variables qualitatives</h4>
<p id="r-4742328" data-claire-element-id="8654273">
Voici 2 représentations possibles de la distribution de la variable<em>
categ</em>
:</p>
<p id="r-4742351" data-claire-element-id="8693602">
<img id="r-4764546" data-claire-element-id="8693601" src="https://user.oc-static.com/upload/2017/10/31/15094582111347_pie_bar.png" alt="">
</p>
<p id="r-4742342" data-claire-element-id="8693603">
A gauche, vous avez le diagramme en secteurs, plus connu sous le nom de diagramme en camembert. Si les francophones y voient un camembert (fleuron de la gastronomie française), les anglophones y voient plutôt une tarte, et l'appellent donc<strong>
pie chart</strong>
. Ici, l'angle de chaque secteur est proportionnel à l'effectif de chaque modalité.</p>
<p id="r-4742521" data-claire-element-id="8693604">
A droite, c'est le diagramme en tuyaux d'orgue, appelé an anglais<strong>
bar chart</strong>
. La hauteur des tuyaux est égale à l'effectif de chaque modalité.</p>
<aside id="r-4742362" data-claire-element-id="8654773" data-claire-semantic="warning">
<p id="r-4742361" data-claire-element-id="8654772">
La hauteur des tuyaux représente le nombre d'opérations bancaires d'une catégorie donnée, et non pas la somme de leurs montants. Si vous avez 2 opérations de catégorie<em>
transport</em>
, l'une de 20€ et l'autre de 300€, la hauteur du tuyau sera de 2, pas de 320.</p>
</aside>
<p id="r-4742346" data-claire-element-id="8654774">
Si la variable est qualitative ordinale, alors il suffit de classer sur le graphique les modalités en ordre croissant.</p>
<h4 id="r-4742369" data-claire-element-id="8654776">
Cas des variables quantitatives</h4>
<h4 id="r-4742523" data-claire-element-id="8693608">
Variables discrètes</h4>
<p id="r-4742522" data-claire-element-id="8655041">
Pour les variables discrètes on les représente par un équivalent du diagramme en tuyaux d'orgues : le diagramme en bâtons. Cependant, avec les variables qualitatives, on pouvait placer les tuyaux un peu n'importe où sur l'axe horizontal. Mais avec une variable quantitative, on est contraint à placer précisément les bâtons sur l'axe horizontal. Comme on doit être précis, on préfère que les bâtons soient très fins.</p>
<p id="r-4764548" data-claire-element-id="8693607">
<img id="r-4764547" data-claire-element-id="8693606" src="https://user.oc-static.com/upload/2017/10/31/15094583285296_bar.png" alt="">
</p>
<h4 id="r-4742526" data-claire-element-id="8788019">
Variables continues</h4>
<p id="r-4742642" data-claire-element-id="8655044">
Réfléchissons un peu. Prenons la variable<em>
taille</em>
d'une population d'humains. Entre les tailles 1.50m et 1.60m, il y a une infinité de valeurs possibles (ex: 1.51939m , 1.50004m , 1.599999920371m, etc.). Comme il y a une infinité de valeurs, la probabilité d'avoir deux humains ayant<em>
exactement</em>
la même taille est donc très faible.</p>
<p id="r-4742643" data-claire-element-id="8764023">
Si on crée un diagramme en bâtons, et que l'on a un humain qui mesure 1.478m, on va placer un bâton situé à 1.478m sur l'axe horizontal. Quelle sera sa hauteur ? Elle sera au moins de 1, car il y a au moins un humain qui mesure 1.478m. Mais comme la probabilité qu'un deuxième humain mesure exactement la même taille est extrêmement faible, la taille de notre bâton ne dépassera jamais 1. Cependant, on peut avoir un deuxième humain qui mesure<em>
presque</em>
1.478m, par exemple 1.47800000000001m. On placerait donc un deuxième bâton de hauteur 1 très proche du premier bâton. Au final, on se retrouverait avec plein de bâtons très rapprochés, tous de hauteur 1 : je vous laisse imaginer le bazar !</p>
<h5 id="r-4742881" data-claire-element-id="8788015">
Cas agrégé</h5>
<div id="r-4742645" data-claire-element-id="8655047" data-claire-semantic="question">
<p id="r-4742644" data-claire-element-id="8655046">
Tu chipotes, 1.478m et 1.47800000000001m, c'est quasiment la même valeur, il faut donc que tu les considères comme égales !</p>
</div>
<p id="r-4742646" data-claire-element-id="8655345">
Tout à fait ! Considérer que 1.478m et 1.47800000000001m sont presque égales, c'est<em>
regrouper</em>
ces valeurs. On dit alors que l'on<strong>
agrège</strong>
des valeurs en<strong>
classes</strong>
. Si on décide d'agréger en classes de taille 0.2m, alors ces 2 valeurs seront toutes les deux situées dans la classe<math>
$\([1.4m;1.6m[\)$</math>
.</p>
<aside id="r-4742742" data-claire-element-id="8655347" data-claire-semantic="information">
<p id="r-4742741" data-claire-element-id="8655346">
Notez qu'il est possible d'agréger en classes de largeurs inégales. Par exemple, on peut avoir des classes de largeur 0.5m pour les tailles inférieures à 1m, puis des classes de largeur 0.2m pour les tailles supérieures à 1m. On aura ceci :<math>
$\([0m ; 0.5m[\)$</math>
,<math>
$\([0.5m ; 1m[\)$</math>
,<math>
$\([1m ; 1.2m [\)$</math>
,<math>
$\([1.2m ; 1.4m[\)$</math>
, etc.</p>
</aside>
<p id="r-4776936" data-claire-element-id="8729251">
Le fait d'agréger une variable s'appelle la<strong>
discrétisation</strong>
(en anglais :<strong>
binning, bucketing</strong>
ou<strong>
discretization</strong>
)</p>
<p id="r-4742647" data-claire-element-id="8787763">
Ainsi, pour les variables continues, on utilise l'<strong>
histogramme</strong>
, dans lequel les valeurs sont agrégées. Ici, comme on représente des classes (ou des intervalles si vous préférez), on n'utilise plus de fins bâtons, mais des rectangles dont la largeur correspond à la largeur de la classe.</p>
<aside id="r-4742714" data-claire-element-id="8655275" data-claire-semantic="warning">
<p id="r-4742713" data-claire-element-id="8655274">
Aussi, l'effectif de la classe ne sera plus représenté par la hauteur du rectangle, mais par sa<em>
surface</em>
. Cela est dû au fait que les classes n'ont pas forcément la même largeur.</p>
</aside>
<figure id="r-4764551" data-claire-element-id="8788014">
<img id="r-4764549" data-claire-element-id="8693609" src="https://user.oc-static.com/upload/2017/10/31/1509458746274_hists.png" alt="A gauche : histogramme de la variable montant, filtrée sur les montants compris entre -100 et 100. A droite, histogramme avec des classes de largeur inégales.">
<figcaption>
A gauche : histogramme de la variable montant, filtrée sur les montants compris entre -100 et 100. A droite, exemple d'histogramme avec des classes de largeur inégales.</figcaption>
</figure>
<h5 id="r-4742884" data-claire-element-id="8788018">
Cas non agrégé</h5>
<p id="r-4742367" data-claire-element-id="8655683">
Si cependant, vous ne souhaitez pas agréger les valeurs, il existe une autre solution : représenter la<strong>
fonction de répartition empirique</strong>
. Nous avions dit que pour une variable quantitative continue, la diagramme en bâtons n'était pas adapté, car on aurait plein de bâtons très resserrés, chacun de hauteur 1.</p>
<p id="r-4742882" data-claire-element-id="8655851">
Gardons provisoirement ces bâtons, et créons un escalier. On parcours l'axe horizontal des petites valeurs vers les grandes valeurs, et à chaque fois que l'on rencontre un bâton, on monte d'une marche. Il y aura donc autant de marches que de bâtons, et d'ailleurs autant que d'individus. Toutes les marches ont la même hauteur.</p>
<p id="r-4742883" data-claire-element-id="8655685">
Une fois parcourus tous les bâtons, on aura atteint le haut de l'escalier. On dit (arbitrairement) que le haut de l'escalier est d'une hauteur de 1.</p>
<figure id="r-4742944" data-claire-element-id="8788017">
<img id="r-4742942" data-claire-element-id="8655853" src="https://user.oc-static.com/upload/2017/10/26/15090279401459_rep_emp.png" alt="Fonction de répartition empirique">
<figcaption>
Fonction de répartition empirique</figcaption>
</figure>
<aside id="r-4742946" data-claire-element-id="8655857" data-claire-semantic="information">
<p id="r-4742945" data-claire-element-id="8655856">
La fonction de répartition empirique est aussi utilisable pour une variable quantitative discrète. Dans ce cas, on l'appelle aussi<strong>
diagramme des fréquences cumulées</strong>
.</p>
</aside>
<p id="r-4742947" data-claire-element-id="8655858">
Pour en savoir plus sur la fonction de répartition, rendez-vous au bas de ce chapitre, dans la section<em>
Aller plus loin</em>
.</p>
<p id="r-4742757" data-claire-element-id="8655373">
</p>
<h3 id="r-4742527" data-claire-element-id="8787972">
Du côté du code</h3>
<p id="r-4742368" data-claire-element-id="8693206">
Voici le code qui a généré les graphiques ci dessus. Pour chacun des graphiques, 2 lignes suffisent :</p>
<pre id="r-4764473" data-claire-element-id="8693506">
<code data-claire-semantic="python">
import matplotlib.pyplot as plt # VARIABLE QUALITATIVE # Diagramme en secteurs data["categ"].value_counts().plot(kind='pie') # Cette ligne assure que le pie chart est un cercle plutôt qu'une éllipse plt.axis('equal') plt.show() # Affiche le graphique # Diagramme en tuyaux d'orgues data["categ"].value_counts().plot(kind='bar') plt.show() # VARIABLE QUANTITATIVE # Diagramme en bâtons data["quart_mois"].value_counts().plot(kind='bar', width=0.1) plt.show() # Histogramme data["montant"].hist() plt.show() # Histogramme plus beau data[data.montant.abs() &lt; 100]["montant"].hist(bins=20) plt.show()</code>
</pre>
<p id="r-4764414" data-claire-element-id="8693209">
Ici, nous reprenons le même raisonnement qu'au début de ce chapitre : on commence par sélectionner la colonne souhaitée :<code data-claire-semantic="text">
data['categ']</code>
, puis on compte le nombre d'apparitions de chaque modalité :<code data-claire-semantic="text">
data['categ'].value_counts()</code>
. On obtient donc la distribution empirique. Pour l'afficher, on fait appel à la méthode plot, à laquelle on spécifie le type de graphique souhaité :<code data-claire-semantic="text">
data["categ"].value_counts().plot(kind='bar')</code>
.</p>
<p id="r-4764474" data-claire-element-id="8787971">
Comme nous l'avons dit plus haut, pour une variable quantitative, on regroupe les valeurs plutôt que de compter chaque modalité. Utiliser<code data-claire-semantic="text">
value_counts()</code>
n'aurait donc pas vraiment de sens : on utilise donc la méthode<code data-claire-semantic="text">
hist()</code>
, qui s'occupe elle même de regrouper les valeurs en classes. La ligne 20 crée un histogramme un peu trop étalé, car il y a des montants très grands et très petits. On préfère donc filtrer les montants compris entre -100€ et 100€ grâce à<code data-claire-semantic="text">
data[data.montant.abs() &lt; 100]</code>
(on utilise pour cela la<a href="https://fr.wikipedia.org/wiki/Valeur_absolue">
valeur absolue</a>
). Enfin, on peut optionnellement spécifier le nombre de classes voulues grâce au mot clé<code data-claire-semantic="text">
bins</code>
: ici 20.</p>
<p id="r-4764415" data-claire-element-id="8693486">
Ah oui, une dernière chose : pour obtenir une approximation de la répartition empirique, il suffit d'ajouter le mot clé<code data-claire-semantic="text">
cumulative = True</code>
dans la méthode hist :</p>
<pre id="r-4764517" data-claire-element-id="8693487">
<code data-claire-semantic="python">
data[data.montant.abs() &lt; 100]["montant"].hist(bins=20,cumulative=True)</code>
</pre>
<p id="r-4764518" data-claire-element-id="8693488">
</p>
<p id="r-4764416" data-claire-element-id="8693211">
</p>
<h3 id="r-4742847" data-claire-element-id="8764092">
Aller plus loin : la fonction de répartition empirique</h3>
<p id="r-4742886" data-claire-element-id="8655896">
Si vous souhaitez aller plus loin dans les statistiques, il vous faudra connaître la théorie des probabilités. Dans ce domaine, l'équivalent de la distribution d'une variable quantitative est la<a href="https://fr.wikipedia.org/wiki/Densit%C3%A9_de_probabilit%C3%A9">
densité de probabilité</a>
, que l'on représente par une ligne courbe plutôt que par un histogramme. L'utilisation de la densité de probabilité va souvent de pair avec sa<a href="https://fr.wikipedia.org/wiki/Fonction_de_r%C3%A9partition">
fonction de répartition</a>
, qui est plus pratique pour calculer des probabilités. Ainsi, il peut vous être utile de connaître l'équivalent de la fonction de répartition en statistiques, appelée<strong>
fonction de répartition empirique</strong>
.</p>
<p id="r-4742887" data-claire-element-id="8655862">
Elle s'exprime de la manière suivante :</p>
<p id="r-4789859" data-claire-element-id="8764091">
<math>
$\[F_{emp}\left( x\right) =\frac{1}{n}\sum_{i=1}^{n}\, I_{\left\{x_{i}\leq x\right\} }\]$</math>
</p>
<p id="r-4742949" data-claire-element-id="8655864">
où<math>
$\(I\)$</math>
est la<em>
fonction indicatrice</em>
, et où</p>
<p id="r-4742950" data-claire-element-id="8655865">
<math>
$\[I_{\left\{x_{i}\leq x\right\} } = \begin{cases}1\ \text{si} \ x_{i}\leq x\\0 \text{ sinon}\end{cases}\]$</math>
</p>
<p id="r-4742888" data-claire-element-id="8655693">
</p>
<p id="r-4742951" data-claire-element-id="8655866">
</p>
<h3 id="r-4743072" data-claire-element-id="8788022">
Aller plus loin : nombre optimal de classes pour l'agrégation</h3>
<p id="r-4742787" data-claire-element-id="8788021">
Pour l'histogramme, il existe des règles pour déterminer le nombre optimal de classes. Par exemple, la règle de Sturges (1926) considère comme nombre optimal de classes :</p>
<p id="r-4742788" data-claire-element-id="8655424">
<math>
$\[k = [1 + log_2 (n)]\]$</math>
</p>
<p id="r-4742789" data-claire-element-id="8655425">
où<math>
$\(n\)$</math>
est la taille de l'échantillon.</p>
<p id="r-4742249" data-claire-element-id="8655426">
</p>
<p id="r-4742811" data-claire-element-id="8655501">
</p>
<p id="r-4763488" data-claire-element-id="8690380">
</p>
</div>
<div class="js-courseSelementActions sideActions">
<ul class="sideActions__container">
<li>
<a class="sideActions__item js-courseElementActions-copyUrl js-tooltip" href="#" data-tooltip="Copier le lien" data-tooltip-done="Lien copié !">
#</a>
</li>
</ul>
</div>
</div>
