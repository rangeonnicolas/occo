<div itemprop="articleBody" data-page-indentifier="/courses/nettoyez-et-decrivez-votre-jeu-de-donnees/analysez-2-variables-qualitatives-avec-le-chi-2" class="js-isRestrictablePage js-course-container js-smilize js-userCanWatchVideo">
<div class="userContent js-userContent">
<p id="r-4775631" >
Dernier chapitre ! Merci d'être resté jusque là, ça fait chaud au cœur ! :D</p>
<p id="r-4775656" >
Bon... il ne nous reste plus qu'à étudier le cas de 2 variables qualitatives. Je vous rassure, vous avez déjà fait la moitié du travail dans ce chapitre sur le<a href="/courses/nettoyez-et-decrivez-votre-jeu-de-donnees/recherchez-les-correlations#r-4773286">
tableau de contingence</a>
: si vous avez compris ce principe, c'est déjà très bien.</p>
<h3 id="r-4775680" >
Quelles questions nous posons-nous ?</h3>
<p id="r-4775662" >
La méthode d'analyse sera la même pour répondre à toutes les question suivantes. La seule chose qui change, ce sont les 2 variables étudiées :</p>
<ul id="r-4775677" >
<li id="r-4775664" >
<p id="r-4775663" >
Avez-vous les mêmes catégories de dépenses le weekend et en semaine ? (variables<em>
categ</em>
et<em>
weekend</em>
)</p>
</li>
<li id="r-4775666" >
<p id="r-4775665" >
Avez-vous plus d'entrées d'argent en début de mois ou en fin de mois ? (<em>
sens</em>
et<em>
quart_mois</em>
)</p>
</li>
<li id="r-4775668" >
<p id="r-4775667" >
Vos dépenses sont-elles plus grandes en début de mois qu'en fin de mois ? (<em>
tranche_depense</em>
et<em>
quart_mois</em>
)</p>
</li>
<li id="r-4775670" >
<p id="r-4775669" >
Le montant d'une opération est-il différent d'une catégorie de dépense à l'autre ? (<em>
tranche_depense</em>
et<em>
categ</em>
)</p>
</li>
<li id="r-4775672" >
<p id="r-4775671" >
Vos paiements en carte bancaire sont-ils toujours petits et vos virements importants ? (<em>
type</em>
et<em>
tranche_depense</em>
)</p>
</li>
<li id="r-4775674" >
<p id="r-4775673" >
Y a t'il des catégories d'opérations qui arrivent toujours au même moment du mois, comme votre loyer par exemple ? (<em>
categ</em>
et<em>
quart_mois</em>
)</p>
</li>
<li id="r-4775676" >
<p id="r-4775675" >
Y a t'il certaines catégories d'opérations qui s'effectuent toujours selon le même mode de paiement, par exemple par virement bancaire ? (<em>
type</em>
et<em>
categ</em>
)</p>
</li>
</ul>
<aside id="r-4775781" data-claire-semantic="information">
<p id="r-4775678" >
Certaines question sont identiques à celles du chapitre précédent. Dans ce dernier, on utilisait la variable quantitative<em>
montant</em>
, mais ici, on utilise la variable agrégée<em>
tranche_depense</em>
, qui représente la même grandeur mais qui est qualitative.</p>
</aside>
<h3 id="r-4775797" >
Des graphiques !</h3>
<p id="r-4775782" >
Pour répondre à ces questions, vous pouvez afficher le tableau de contingence comme ceci :</p>
<table id="r-4775787" >
<tbody id="r-4775786" >
<tr id="r-4775785" >
<td id="r-4775784" >
<p id="r-4775783" >
code</p>
</td>
</tr>
</tbody>
</table>
<p id="r-4775788" >
Au niveau des graphiques, je vous propose ici 2 représentations :</p>
<table id="r-4775793" >
<tbody id="r-4775792" >
<tr id="r-4775791" >
<td id="r-4775790" >
<p id="r-4775789" >
ILLUS + CODE</p>
</td>
</tr>
</tbody>
</table>
<p id="r-4775794" >
Il se peut que le graphique de gauche soit assez peu lisible s'il y a de grands écarts d'effectifs entre les classes placées sur l'axe horizontal. Une solution peut alors être de placer toutes les barres à la même hauteur, et d'exprimer la variable en ordonnées (axe vertical) en proportion plutôt qu'en effectif.</p>
<aside id="r-4775801" data-claire-semantic="information">
<p id="r-4775795" >
Il vous est aussi possible d'inverser les axes des abscisses et des ordonnées :</p>
</aside>
<table id="r-4775806" >
<tbody id="r-4775805" >
<tr id="r-4775804" >
<td id="r-4775803" >
<p id="r-4775802" >
illus</p>
</td>
</tr>
</tbody>
</table>
<h3 id="r-4775808" >
Des statistiques !</h3>
<p id="r-4775807" >
Malheureusement, il ne nous sera ici pas possible de proposer un modèle comme dans les 2 derniers chapitres. Mais ce n'est pas grave ! On se rattrapera grâce à une mesure statistique.</p>
<p id="r-4776101" >
Reprenez le chapitre sur le tableau de contingence, et remettez vous en tête ce petit encadré que nous avions écrit :</p>
<blockquote id="r-4776103" >
<p id="r-4776102" >
Si deux événements<math>
$\(I\)$</math>
et<math>
$\(J\)$</math>
sont indépendants, alors on s'attend à ce que le nombre d'individus qui satisfont à la fois<math>
$\(I\)$</math>
et<math>
$\(J\)$</math>
(appelons ce nombre<math>
$\(n_{ij}\)$</math>
) soit égal à<math>
$\(f_i\times n_j\)$</math>
(c'est le calcul que vous aviez fait en entrant dans le bar : 30%*10=3). Au contraire, plus<math>
$\(n_{ij}\)$</math>
sera différent de<math>
$\(f_i\times n_j\)$</math>
, plus on aura de raison de penser que<math>
$\(I\)$</math>
et<math>
$\(J\)$</math>
ne sont pas indépendants.</p>
</blockquote>
<p id="r-4776104" >
Etudier une corrélation entre deux variables qualitatives revient donc à comparer les<math>
$\(n_{ij}\)$</math>
avec les<math>
$\(f_i\times n_j\)$</math>
. Les<math>
$\(n_{ij}\)$</math>
, ce sont les nombres qui sont dans le tableau de contingence (en dehors des 2 lignes et colonnes TOTAL). On pourrait donc créer un autre tableau qui aurait la même forme que le tableau de contingence, mais qui contiendrait plutôt les<math>
$\(f_i\times n_j\)$</math>
. Voici donc à gauche le tableau de contingence que nous avions, et à droite le tableau des<math>
$\(f_i\times n_j\)$</math>
:</p>
<p id="r-4777127" >
<img id="r-4777126" src="https://user.oc-static.com/upload/2017/11/07/15100629339754_comparaison.png" alt="">
</p>
<p id="r-4776179" >
Le tableau de droite est ce à quoi on s'attend en cas d'indépendance des 2 variables. Il nous faudrait donc une statistiques qui puisse comparer les valeurs de ces 2 tableaux deux-à-deux, et qui nous permettrait aussi de trouver les cases pour lesquelles les valeurs sont très différentes. Ces cases seront des valeurs dignes d'intérêt, et qui seront source de non-indépendance des 2 variables.</p>
<p id="r-4776266" >
Allez hop ! Si vous voulez comparer deux nombre, je vous conseille de faire leur différence ! Et pour avoir des différences toujours positives (pour éviter qu'elles ne s'annulent en les sommant), passons-les au carré : ce n'est pas la première fois que l'on utilise ce petit stratagème :</p>
<p id="r-4776267" >
<math>
$\[(n_{ij} - f_{i}.n_j)^2\]$</math>
</p>
<p id="r-4776268" >
</p>
<div id="r-4776270" data-claire-semantic="question">
<p id="r-4776269" >
Oui mais là, si j'ai un<math>
$\(n_{ij} = 2\)$</math>
et un<math>
$\(f_i.n_j = 4\)$</math>
, l'écart au carré sera de 4. Si j'ai un<math>
$\(n_{ij}=1000\)$</math>
et un<math>
$\(f_i.n_j = 1002\)$</math>
, l'écart au carré sera aussi de 4. Or une erreur de 4 quand<math>
$\(f_i.n_j\)$</math>
vaut 4, c'est une erreur bien plus importante que si<math>
$\(f_i.n_j = 1002\)$</math>
.</p>
</div>
<p id="r-4776271" >
C'est vrai. On peut alors normaliser cet écart au carré en le divisant par<math>
$\(f_i.n_j\)$</math>
. On obtient donc la formule suivante, en sachant que<math>
$\(f_i = \frac{n_i}{n}\)$</math>
:</p>
<p id="r-4776273" >
</p>
<p id="r-4776361" >
<math>
$\[\frac{(n_{ij}-\frac{n_i.n_j}{n})^2}{\frac{n_i.n_j}{n}}\]$</math>
</p>
<p id="r-4776362" >
Cette mesure est calculable pour chacune des cases du tableau de contingence. Il peut être intéressant de colorer ce dernier en fonction de cette mesure : foncé quand la mesure est grande, clair quand elle est proche de 0. Ainsi, on détecte facilement les cases qui sont source de non-indépendance :</p>
<table id="r-4776350" >
<tbody id="r-4776349" >
<tr id="r-4776348" >
<td id="r-4776347" >
<p id="r-4776346" >
ILLUS + code</p>
</td>
</tr>
</tbody>
</table>
<p id="r-4776274" >
Enfin, si on somme toutes ces mesures pour chaque case du tableau (de la colonne j=1 à la colonne j=l, puis de la ligne i=1 à la ligne i=k), on obtient la statistique<math>
$\(\xi_n\)$</math>
:</p>
<p id="r-4776371" >
<math>
$\[\xi_n = \sum_{i=1}^k\sum_{j=1}^l\frac{(n_{ij}-\frac{n_i.n_j}{n})^2}{\frac{n_i.n_j}{n}}\]$</math>
</p>
<p id="r-4776372" >
Normalement, il y a un seuil qui permet de déterminer si les 2 variables sont indépendantes ou pas. C'est un peu compliqué, mais pour en savoir plus, vous pouvez regarder cet article<a href="https://fr.wikipedia.org/wiki/Test_du_%CF%87%C2%B2#Exemple">
Wikipedia</a>
. Retenons juste ici que plus<math>
$\(\xi_n\)$</math>
est grand, moins l'hypothèse d'indépendance est valide.</p>
<aside id="r-4776374" data-claire-semantic="information">
<p id="r-4776373" >
Le test avec le seuil s'appelle le test du<math>
$\(\chi^2\)$</math>
d'indépendance (prononcer "ki-2"), parfois écrit chi-2 ou khi-2, rendu célèbre par un célèbre chanteur français par sa chanson<a href="https://www.youtube.com/watch?v=XVW5qA7QLmw">
Khi-2 nous deux</a>
.</p>
</aside>
<p id="r-4776375" >
</p>
<p id="r-4776366" >
</p>
<p id="r-4776351" >
</p>
</div>
<div class="js-courseSelementActions sideActions">
<ul class="sideActions__container">
<li>
<a class="sideActions__item js-courseElementActions-copyUrl js-tooltip" href="#" data-tooltip="Copier le lien" data-tooltip-done="Lien copié !">
#</a>
</li>
</ul>
</div>
</div>
