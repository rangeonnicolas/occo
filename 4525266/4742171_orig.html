<div itemprop="articleBody" data-page-indentifier="/courses/nettoyez-et-decrivez-votre-jeu-de-donnees/representez-la-distribution-empirique-dune-variable" class="js-isRestrictablePage js-course-container js-smilize js-userCanWatchVideo">
<div class="userContent js-userContent">
<p id="r-4742246" data-claire-element-id="8654101">Comment peut-on représenter une variable ?</p><p id="r-4742271" data-claire-element-id="8787651">Jusqu'à maintenant, nous avons vu comment <a href="/courses/nettoyez-et-decrivez-votre-jeu-de-donnees/decouvrez-les-statistiques-vocabulaire-et-tour-dhorizon">afficher un échantillon</a> (sous forme de tableau où chaque ligne représente un individu, et chaque colonne une variable). Pour représenter la variable <em>categ</em> par exemple, on pourrait sélectionner la colonne <em>categ</em> du tableau, et l'afficher telle qu'elle :</p><figure id="r-4789818" data-claire-element-id="8793632"><img id="r-4789816" data-claire-element-id="8763981" src="https://user.oc-static.com/upload/2017/10/30/15094043712247_categ.png" alt="La colonne"></figure><p id="r-4742287" data-claire-element-id="8763984">Mais il faut avouer que c'est assez illisible ! :waw: En plus, il est fréquent d'avoir des échantillons de 1000 individus ou plus. Une colonne avec 1000 valeur dedans, c'est très moche et très difficile à interpréter. Il y a une solution bien meilleure, qui consiste à dire :</p><p id="r-4742321" data-claire-element-id="8654311"><em>Il y a 39 fois la valeur COURSES, 212 fois la valeur AUTRE, 21 fois la valeur TRANSPORT, etc.</em></p><p id="r-4742322" data-claire-element-id="8654243">Cette formulation est appelée <strong>distribution empirique</strong>. C'est cette distribution que l'on se propose de représenter graphiquement ici.</p><h3 id="r-4742336" data-claire-element-id="8793649">Représenter une distribution empirique</h3><p id="r-4742326" data-claire-element-id="8790323">Les différentes "possibilités" que l'on peut observer pour la variable <em>categ</em>, ce sont ses <strong>modalités</strong>. Les modalités de la variable <em>categ</em> sont : <em>courses</em>, <em>transport</em>, <em>autre</em>, <em>loyer</em>, etc. Pour une variable quantitative cependant, on les appelle les <strong>valeurs</strong> possibles. On associe à chaque modalité (ou valeur) un <strong>effectif</strong>. L'effectif de la modalité <em>courses</em> est <math>$\(n_{courses} = 39\)$</math> .</p><p id="r-4799032" data-claire-element-id="8790324">En divisant un effectif par le nombre d'individus de l'échantillon (noté <math>$\(n\)$</math> ), on obtient un <strong>fréquence</strong>.</p><p id="r-4799033" data-claire-element-id="8790325">Le distribution empirique d'une variable, c'est <em>l’ensemble des valeurs (ou modalités) prises par cette variable, ainsi que leurs effectifs associées</em>. On trouve aussi une autre version : <em>l’ensemble des valeurs (ou modalités) prises par cette variable, ainsi que leurs fréquences associées</em>. On peut présenter ceci sous forme de tableau. Nous approfondirons cette présentation dans le chapitre suivant :</p><p id="r-4799035" data-claire-element-id="8790327"><img id="r-4799034" data-claire-element-id="8790326" src="https://s3.eu-west-1.amazonaws.com/user.oc-static.com/upload/2017/11/21/15112589045762_tableau1.png" alt=""></p><p id="r-4799137" data-claire-element-id="8790633">Passons maintenant aux représentations graphiques.</p><h4 id="r-4742335" data-claire-element-id="8793638">Cas des variables qualitatives</h4><p id="r-4742328" data-claire-element-id="8654273">Voici 2 représentations possibles de la distribution de la variable <em>categ</em> :</p><p id="r-4742351" data-claire-element-id="8793634"> <img id="r-4764546" data-claire-element-id="8793633" src="https://s3.eu-west-1.amazonaws.com/user.oc-static.com/upload/2017/11/21/15112739298466_pie_bar.png" alt=""></p><p id="r-4742342" data-claire-element-id="8693603">A gauche, vous avez le diagramme en secteurs, plus connu sous le nom de diagramme en camembert. Si les francophones y voient un camembert (fleuron de la gastronomie française), les anglophones y voient plutôt une tarte, et l'appellent donc <strong>pie chart</strong>. Ici, l'angle de chaque secteur est proportionnel à l'effectif de chaque modalité.</p><p id="r-4742521" data-claire-element-id="8793635">A droite, c'est le diagramme en tuyaux d'orgue, appelé an anglais <strong>bar chart</strong>. La hauteur des tuyaux est égale à l'effectif de chaque modalité, ou bien (au choix) égale à la fréquence de chaque modalité comme c'est le cas ici.</p><aside id="r-4742362" data-claire-element-id="8793637" data-claire-semantic="warning"><p id="r-4742361" data-claire-element-id="8793636">La hauteur des tuyaux représente le nombre (ou la fréquence) d'opérations bancaires d'une catégorie donnée, et non pas la somme de leurs montants. Si vous avez 2 opérations de catégorie <em>transport</em>, l'une de 20€ et l'autre de 300€, la hauteur du tuyau sera de 2 (ou de <math>$\(\frac{2}{n}\)$</math> ), pas de 320.</p></aside><p id="r-4742346" data-claire-element-id="8654774">Si la variable est qualitative ordinale, alors il suffit de classer sur le graphique les modalités en ordre croissant.</p><h4 id="r-4742369" data-claire-element-id="8793648">Cas des variables quantitatives</h4><h5 id="r-4799036" data-claire-element-id="8793641">Variables discrètes</h5><p id="r-4742522" data-claire-element-id="8655041">Pour les variables discrètes on les représente par un équivalent du diagramme en tuyaux d'orgues : le diagramme en bâtons. Cependant, avec les variables qualitatives, on pouvait placer les tuyaux un peu n'importe où sur l'axe horizontal. Mais avec une variable quantitative, on est contraint à placer précisément les bâtons sur l'axe horizontal. Comme on doit être précis, on préfère que les bâtons soient très fins.</p><p id="r-4764548" data-claire-element-id="8793640"><img id="r-4764547" data-claire-element-id="8793639" src="https://s3.eu-west-1.amazonaws.com/user.oc-static.com/upload/2017/11/21/15112739211257_bar.png" alt=""></p><h5 id="r-4799037" data-claire-element-id="8793647">Variables continues</h5><p id="r-4799138" data-claire-element-id="8791003">Prenons l'exemple de la taille d'une personne : c'est une variable continue. On peut très bien avoir une personne de taille 1.47801 m et une autre de 1.47802m. Ces deux tailles sont différentes : faut-il alors afficher sur notre graphique 2 bâtons : un pour chacune des 2 tailles ?</p><div id="r-4742645" data-claire-element-id="8791005" data-claire-semantic="question"><p id="r-4742644" data-claire-element-id="8791004">Tu chipotes, 1.47801m et 1.47802m, c'est quasiment la même valeur, il faut donc que tu les considères comme égales !</p></div><p id="r-4742646" data-claire-element-id="8791006">Tout à fait ! Considérer que 1.47801m et 1.47802m sont presque égales, c'est <em>regrouper</em> ces valeurs. On dit alors que l'on <strong>agrège</strong> des valeurs en <strong>classes</strong>. Si on décide d'agréger en classes de taille 0.2m, alors ces 2 valeurs seront toutes les deux situées dans la classe <math>$\([1.4m;1.6m[\)$</math> .</p><aside id="r-4742742" data-claire-element-id="8655347" data-claire-semantic="information"><p id="r-4742741" data-claire-element-id="8655346">Notez qu'il est possible d'agréger en classes de largeurs inégales. Par exemple, on peut avoir des classes de largeur 0.5m pour les tailles inférieures à 1m, puis des classes de largeur 0.2m pour les tailles supérieures à 1m. On aura ceci : <math>$\([0m ; 0.5m[\)$</math> , <math>$\([0.5m ; 1m[\)$</math> , <math>$\([1m ; 1.2m [\)$</math> , <math>$\([1.2m ; 1.4m[\)$</math> , etc.</p></aside><p id="r-4776936" data-claire-element-id="8729251">Le fait d'agréger une variable s'appelle la <strong>discrétisation</strong> (en anglais : <strong>binning, bucketing</strong> ou<strong> discretization</strong>)</p><p id="r-4742647" data-claire-element-id="8787763">Ainsi, pour les variables continues, on utilise l'<strong>histogramme</strong>, dans lequel les valeurs sont agrégées. Ici, comme on représente des classes (ou des intervalles si vous préférez), on n'utilise plus de fins bâtons, mais  des rectangles dont la largeur correspond à la largeur de la classe.</p><aside id="r-4742714" data-claire-element-id="8655275" data-claire-semantic="warning"><p id="r-4742713" data-claire-element-id="8655274">Aussi, l'effectif de la classe ne sera plus représenté par la hauteur du rectangle, mais par sa <em>surface</em>. Cela est dû au fait que les classes n'ont pas forcément la même largeur.</p></aside><figure id="r-4764551" data-claire-element-id="8793644"><img id="r-4764549" data-claire-element-id="8793642" src="https://s3.eu-west-1.amazonaws.com/user.oc-static.com/upload/2017/11/21/15112739099318_hists.png" alt="A gauche : histogramme de la variable montant, filtrée sur les montants compris entre -100 et 100. A droite, histogramme avec des classes de largeur inégales."></figure><p id="r-4799248" data-claire-element-id="8791035">Si cependant, vous ne souhaitez pas agréger les valeurs, il existe une autre solution : représenter la <strong>fonction de répartition empirique</strong>. Il faut vous la représenter comme un escalier. Pour la représenter, on parcours l'axe horizontal des petites valeurs vers les grandes valeurs. A chaque fois que l'on rencontre une valeur qui est présente dans notre échantillon, on monte d'une marche. Il y aura donc autant de marches que de valeurs, et d'ailleurs autant que d'individus. Toutes les marches ont la même hauteur.</p><p id="r-4742883" data-claire-element-id="8791036">Une fois parcourus toutes les valeurs de l'échantillon, on aura atteint le haut de l'escalier. On dit (arbitrairement) que le haut de l'escalier est d'une hauteur de 1.</p><figure id="r-4742944" data-claire-element-id="8793646"><img id="r-4742942" data-claire-element-id="8655853" src="https://user.oc-static.com/upload/2017/10/26/15090279401459_rep_emp.png" alt="Fonction de répartition empirique"><figcaption>Fonction de répartition empirique</figcaption></figure><p id="r-4742945" data-claire-element-id="8791039"></p><p id="r-4742947" data-claire-element-id="8791077">Pour en savoir plus sur la fonction de répartition, rendez-vous au bas de ce chapitre (section <em>Aller plus loin</em>.)</p><p id="r-4742757" data-claire-element-id="8655373"></p><h3 id="r-4742527" data-claire-element-id="8793653">Du côté du code</h3><p id="r-4742368" data-claire-element-id="8693206">Voici le code qui a généré les graphiques ci dessus. Pour chacun des graphiques, 2 lignes suffisent :</p><pre id="r-4764473" data-claire-element-id="8793650"><code data-claire-semantic="python">import matplotlib.pyplot as plt

# VARIABLE QUALITATIVE
# Diagramme en secteurs
data["categ"].value_counts(normalize=True).plot(kind='pie')
# Cette ligne assure que le pie chart est un cercle plutôt qu'une éllipse
plt.axis('equal') 
plt.show() # Affiche le graphique

# Diagramme en tuyaux d'orgues
data["categ"].value_counts(normalize=True).plot(kind='bar')
plt.show()

# VARIABLE QUANTITATIVE
# Diagramme en bâtons
data["quart_mois"].value_counts(normalize=True).plot(kind='bar',width=0.1)
plt.show()

# Histogramme
data["montant"].hist(normed=True)
plt.show()
# Histogramme plus beau
data[data.montant.abs() &lt; 100]["montant"].hist(normed=True,bins=20)
plt.show()</code></pre><p id="r-4764414" data-claire-element-id="8793651">Ici, nous reprenons le même raisonnement qu'au début de ce chapitre : on commence par sélectionner la colonne souhaitée :  <code data-claire-semantic="text">data['categ']</code>  , puis on compte le nombre d'apparitions de chaque modalité :  <code data-claire-semantic="text">data['categ'].value_counts()</code>  . Pour obtenir les fréquences, on peut optionnellement ajouter  <code data-claire-semantic="text">normalize=True</code>  . On obtient donc la distribution empirique. Pour l'afficher, on fait appel à la méthode  <code data-claire-semantic="text">plot</code>  , à laquelle on spécifie le type de graphique souhaité (  <code data-claire-semantic="text">pie</code>  ou  <code data-claire-semantic="text">bar</code>  ). </p><p id="r-4764474" data-claire-element-id="8793652">Comme nous l'avons dit plus haut, pour une variable quantitative, on regroupe les valeurs en classes. Utiliser  <code data-claire-semantic="text">value_counts()</code>  n'aurait donc pas vraiment de sens : on utilise donc la méthode  <code data-claire-semantic="text">hist()</code>  , qui s'occupe elle même de regrouper les valeurs en classes. La ligne 20 crée un histogramme un peu trop étalé, car il y a des montants très grands et très petits. On filtre donc ici les montants compris entre -100€ et 100€ grâce à  <code data-claire-semantic="text">data[data.montant.abs() &lt; 100]</code>  (on utilise pour cela la <a href="https://fr.wikipedia.org/wiki/Valeur_absolue">valeur absolue</a>). Enfin, on peut optionnellement spécifier le nombre de classes voulues grâce au mot clé  <code data-claire-semantic="text">bins</code>  : ici 20.</p><p id="r-4799289" data-claire-element-id="8791150"></p><p id="r-4764518" data-claire-element-id="8693488"></p><p id="r-4764416" data-claire-element-id="8693211"></p><h3 id="r-4742847" data-claire-element-id="8791082">Aller plus loin : la fonction de répartition empirique</h3><p id="r-4742887" data-claire-element-id="8791081">La fonction de répartition empirique s'exprime de la manière suivante :</p><p id="r-4789859" data-claire-element-id="8764091"><math>$\[F_{emp}\left( x\right) =\frac{1}{n}\sum_{i=1}^{n}\, I_{\left\{x_{i}\leq x\right\} }\]$</math></p><p id="r-4742949" data-claire-element-id="8655864"> où  <math>$\(I\)$</math> est la <em>fonction indicatrice</em>, et où</p><p id="r-4742950" data-claire-element-id="8655865"><math>$\[I_{\left\{x_{i}\leq x\right\} } = \begin{cases}1\ \text{si} \ x_{i}\leq x\\0 \text{ sinon}\end{cases}\]$</math></p><p id="r-4742888" data-claire-element-id="8655693"></p><p id="r-4742951" data-claire-element-id="8655866"></p><h3 id="r-4743072" data-claire-element-id="8788022">Aller plus loin : nombre optimal de classes pour l'agrégation</h3><p id="r-4742787" data-claire-element-id="8788021">Pour l'histogramme, il existe des règles pour déterminer le nombre optimal de classes. Par exemple, la règle de Sturges (1926) considère comme nombre optimal de classes :</p><p id="r-4742788" data-claire-element-id="8655424"><math>$\[k = [1 + log_2 (n)]\]$</math></p><p id="r-4742789" data-claire-element-id="8655425">où <math>$\(n\)$</math> est la taille de l'échantillon.</p><p id="r-4742249" data-claire-element-id="8655426"></p><p id="r-4742811" data-claire-element-id="8655501"></p><p id="r-4763488" data-claire-element-id="8690380"></p>
</div>
<div class="js-courseSelementActions sideActions">
<ul class="sideActions__container">
<li>
<a class="sideActions__item  js-courseElementActions-copyUrl  js-tooltip" href="#" data-tooltip="Copier le lien" data-tooltip-done="Lien copié !">
#
</a>
</li>
</ul>
</div>
</div>